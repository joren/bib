<div class="max-w-5xl mx-auto">
  <%= link_to "â† Back to Library", books_path, class: "text-blue-600 hover:text-blue-700 mb-6 inline-block" %>

  <div class="bg-white rounded-lg shadow-md overflow-hidden">
    <div class="md:flex">
      <div class="md:w-1/3 bg-gray-100 p-8">
        <%= image_tag cover_url,
            alt: @book.display_title,
            class: "w-full rounded-lg shadow-lg" %>
      </div>

      <div class="md:w-2/3 p-8">
        <div class="mb-6">
          <h1 class="text-3xl font-bold text-gray-900 mb-2">
            <%= @book.display_title %>
          </h1>

          <p class="text-xl text-gray-600 mb-4">
            by <%= @book.display_author %>
          </p>

          <div class="flex gap-2 mb-4">
            <span class="text-sm px-3 py-1 rounded <%= @book.epub? ? 'bg-blue-100 text-blue-800' : 'bg-red-100 text-red-800' %>">
              <%= @book.file_type&.upcase %>
            </span>

            <% if @book.file_size %>
              <span class="text-sm px-3 py-1 rounded bg-gray-100 text-gray-800">
                <%= number_to_human_size(@book.file_size) %>
              </span>
            <% end %>

            <% if @book.language %>
              <span class="text-sm px-3 py-1 rounded bg-gray-100 text-gray-800">
                <%= @book.language.upcase %>
              </span>
            <% end %>
          </div>
        </div>

        <% if @book.description.present? %>
          <div class="mb-6">
            <h2 class="text-lg font-semibold text-gray-900 mb-2">Description</h2>
            <p class="text-gray-700 leading-relaxed">
              <%= simple_format(@book.description) %>
            </p>
          </div>
        <% end %>

        <div class="grid grid-cols-2 gap-4 mb-6 text-sm">
          <% if @book.publisher.present? %>
            <div>
              <span class="font-semibold text-gray-700">Publisher:</span>
              <span class="text-gray-600"><%= @book.publisher %></span>
            </div>
          <% end %>

          <% if @book.published_on.present? %>
            <div>
              <span class="font-semibold text-gray-700">Published:</span>
              <span class="text-gray-600"><%= @book.published_on.year %></span>
            </div>
          <% end %>

          <% if @book.isbn.present? %>
            <div>
              <span class="font-semibold text-gray-700">ISBN:</span>
              <span class="text-gray-600"><%= @book.isbn %></span>
            </div>
          <% end %>
        </div>

        <div class="flex gap-4">
          <%= link_to "Download", download_book_path(@book),
              class: "bg-blue-600 text-white py-3 px-6 rounded-md hover:bg-blue-700 font-semibold" %>

          <%= button_to "Delete", book_path(@book),
              method: :delete,
              data: { turbo_confirm: "Are you sure you want to delete this book?" },
              class: "bg-red-600 text-white py-3 px-6 rounded-md hover:bg-red-700 font-semibold" %>
        </div>

        <div class="mt-4 text-sm text-gray-500">
          Added <%= time_tag @book.created_at, @book.created_at.strftime("%B %d, %Y") %>
        </div>
      </div>
    </div>
  </div>
</div>
